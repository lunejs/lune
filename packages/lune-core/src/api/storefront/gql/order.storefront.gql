type Mutation {
  createOrder(input: CreateOrderInput!): OrderResult!
  addLineToOrder(orderId: ID!, input: CreateOrderLineInput!): OrderResult!
  updateOrderLine(lineId: ID!, input: UpdateOrderLineInput!): OrderResult!
  removeOrderLine(lineId: ID!): OrderResult!
  addCustomerToOrder(orderId: ID!, input: AddCustomerToOrderInput!): OrderResult!
  addShippingAddressToOrder(orderId: ID!, input: CreateOrderAddressInput!): OrderResult!
  addShippingFulfillmentToOrder(orderId: ID!, input: AddShippingFulfillmentInput!): OrderResult!
  addInStorePickupFulfillmentToOrder(
    orderId: ID!
    input: AddInStorePickupFulfillmentInput!
  ): OrderResult!
  addPaymentToOrder(orderId: ID!, input: AddPaymentToOrderInput!): OrderResult!

  addDiscountCodeToOrder(orderId: ID!, code: String!): OrderResult!
}

input CreateOrderInput {
  line: CreateOrderLineInput
}

input CreateOrderLineInput {
  productVariantId: ID!
  quantity: Int!
}

input UpdateOrderLineInput {
  quantity: Int!
}

input AddCustomerToOrderInput {
  firstName: String
  lastName: String
  email: String!
  phoneNumber: String
}

input CreateOrderAddressInput {
  fullName: String!
  streetLine1: String!
  streetLine2: String
  city: String!
  postalCode: String!
  phoneNumber: String!
  references: String
  countryCode: String!
  stateCode: String!
}

input AddShippingFulfillmentInput {
  methodId: ID!
}

input AddInStorePickupFulfillmentInput {
  locationId: ID!
}

input AddPaymentToOrderInput {
  methodId: ID!
}

" Results "
type OrderResult {
  order: Order
  apiErrors: [OrderErrorResult!]!
}

type OrderErrorResult {
  code: OrderErrorCode!
  message: String!
}

" Utils "
enum OrderErrorCode {
  FORBIDDEN_ORDER_ACTION
  NOT_ENOUGH_STOCK
  INVALID_QUANTITY
  INVALID_CUSTOMER_EMAIL
  INVALID_SHIPPING_METHOD
  MISSING_SHIPPING_ADDRESS
  DISCOUNT_CODE_NOT_APPLICABLE
  DISCOUNT_HANDLER_NOT_FOUND
  PAYMENT_HANDLER_NOT_FOUND
  PAYMENT_FAILED
}
