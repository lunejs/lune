extend type Order {
  """
  The date and time when the order has been marked as completed (delivered and paid)
  """
  completedAt: Date

  payments: [Payment!]!
  cancellation: OrderCancellation
}

type Query {
  orders(input: OrderListInput): OrderList!
}

type Mutation {
  markOrderAsProcessing(id: ID!): OrderResult!
  markOrderAsShipped(id: ID!, input: MarkOrderAsShippedInput!): OrderResult!
  markOrderAsReadyForPickup(id: ID!): OrderResult!
  markOrderAsDelivered(id: ID!): OrderResult!
  markOrderAsCompleted(id: ID!): OrderResult!
  cancelOrder(id: ID!, input: CancelOrderInput!): OrderResult!
}

input MarkOrderAsShippedInput {
  carrier: String!
  trackingCode: String!
}

input CancelOrderInput {
  reason: String!
  shouldRestock: Boolean
}

type OrderResult {
  order: Order
  apiErrors: [OrderErrorResult!]!
}

type OrderErrorResult {
  code: OrderErrorCode!
  message: String!
}

enum OrderErrorCode {
  FORBIDDEN_ORDER_ACTION
}

input OrderListInput {
  """
  Skip the first n results
  """
  skip: Int

  """
  takes n result from where the skip position is
  """
  take: Int

  """
  Filters to apply
  """
  filters: OrderFilters
}

extend input OrderFilters {
  """
  Filter by order state
  """
  state: OrderState
  """
  Filter by customer first name, last name, or email. When combined with code, uses OR logic.
  """
  customer: StringFilter
}
